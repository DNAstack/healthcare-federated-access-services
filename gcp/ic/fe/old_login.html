<!DOCTYPE html>
<!--
 Copyright 2019 Google LLC

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Identity Concentrator: Sign In</title>

  <link rel="icon" href="/identity/static/favicon.png" type="image/png"/>
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.cyan-pink.min.css">
  <!-- <link rel="stylesheet" href="/identity/static/login.css"> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.slim.min.js"></script>
  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  <style>
    html, body {
      height: 100%;
    }

    body {
      margin: 0;
      font-family: 'Roboto', sans-serif;
      font-size: 16px;
      color: #1f1f1f;
    }

    p {
      font-size: 16px;
    }

    main {
      width: 100%;
      height: 100%;
    }

    h2 {
      font-size: 3rem;
      font-weight: 300;
    }

    h4 {
      font-size: 2rem;
      font-weight: 300;
      margin-bottom: 1rem;
    }

    h4:not(:first-child) {
      margin-top: 4rem;
    }

    h4:first-of-type {
      --margin: 0 0 1rem 0;
    }

    a:not(:last-of-type) {
      margin-bottom: 0.35rem;
    }

    a:not(:first-of-type) {
      margin-top: 0.35rem;
    }

    a span {
      color: #ffffff;
    }

    .flex {
      display: flex;
    }

    .flex--column {
      flex-direction: column;
    }

    .vertical-center {
      align-items: center;
    }

    .horizontal-center {
      justify-content: center;
    }

    .stretch {
      flex-grow: 1;
    }

    button:disabled.mdl-button--primary.mdl-button--primary.mdl-button--raised,
    .mdl-button--primary.mdl-button--primary.mdl-button--fab {
      background-color: #77777a;
      color: #ffffff;
    }

    .mdl-button--primary.mdl-button--primary.mdl-button--raised,
    .mdl-button--primary.mdl-button--primary.mdl-button--fab {
      background-color: #00bdd4;
      padding-left: 4rem;
      padding-right: 4rem;
    }

    .mdl-button--primary.mdl-button--primary.mdl-button--google {
      background-color: #ff3b30;
    }

    .mdl-button {
      overflow: initial;
    }

    #providers-container {
      padding: 0 4rem;
      justify-content: center;
      background-color: #ffffff;
      overflow-y: auto;
    }

    #ic-main-content, #providers-container {
      height: 100%;
    }

    #ic-main-content {
      background-color: #f5f5f6;
      flex-shrink: 10;
    }

    #providers-container ~ div {
      padding: 0 15%;
    }
  </style>
  <script>

      var providers = ${PROVIDER_LIST};

      function onInit() {
          if (!providers) return;
          providers.idps && populateProviderHtml("idps", providers.idps);
          providers.personas && populateProviderHtml("personas", providers.personas);
      }

      function populateProviderHtml(id, items) {
          var html = "";

          html += getProviderHeaderHtml(id, html);
          html += getProviderActionsHtml(items, html);

          $('#providers-container').append(html);
      }

      function getProviderHeaderHtml(id) {
          if (id === 'idps') {
              return '<h4>New or Returning user?</h4><p>Verify your identity using one of these credential methods.</p>';
          } else if (id === 'personas') {
              return '<h4>Testing personas</h4><p>Log in as a testing persona.</p>';
          }
      }

      function getProviderActionsHtml(items) {
          var names = Object.keys(items);
          names.sort();
          var html = "";
          for (var i = 0; i < names.length; i++) {
              var name = names[i];
              var item = items[name];
              var label = (item.ui && item.ui.label) || name;
              html += getButtonHtml(item.url, name, label);
          }
          return html;
      }

      function getButtonHtml(url, name, label) {
          var btnClass = 'mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--primary';
          if (name && name === 'google') {
              btnClass += ' mdl-button--google';
          }
          // TODO(cdvoisin): escape url and label to be safe strings.
          return `<a class="${btnClass}" href="${url}"><span >${label}</span></a>`;
      }

  </script>
</head>
<body class="flex vertical-center horizontal-center"
      onload="onInit()">
<main class="flex">
  <div id="providers-container"
       class="flex flex--column">
  </div>
  <div id="ic-main-content"
       class="flex flex--column vertical-center horizontal-center stretch">
    <h2>Data Discovery and Access Platform</h2>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec libero diam, lobortis sed ipsum dapibus, volutpat
      congue tellus. Morbi tincidunt tempus nisl, at fringilla elit gravida eu. Cras nulla sem, varius et mi a,
      condimentum efficitur lorem. Donec suscipit diam at bibendum consectetur. Praesent sollicitudin elit elit, eget
      eleifend arcu placerat vel. Sed sed orci metus. Mauris vitae iaculis nisi, mollis tempus nibh. Aenean dapibus
      laoreet urna, id vehicula neque euismod et. Interdum et malesuada fames ac ante ipsum primis in faucibus. Maecenas
      congue erat sed felis pellentesque condimentum. Sed consectetur finibus ligula, vel bibendum dui pulvinar et. Ut
      eu.</p>
    <button disabled
            class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--primary">
      Explore
    </button>
  </div>
</main>
</body>
</html>
